/**
 * Lists all image files under public/assets/vehicles/russia/navy and writes
 * src/data/navyImagePaths.ts. Run after adding or renaming navy images:
 *   node scripts/list-navy-images.cjs
 */
const fs = require('fs')
const path = require('path')

const NAVY_DIR = path.join(__dirname, '..', 'public', 'assets', 'vehicles', 'russia', 'navy')
const OUT_FILE = path.join(__dirname, '..', 'src', 'data', 'navyImagePaths.ts')
const EXTENSIONS = new Set(['.jpg', '.jpeg', '.png', '.webp'])

function walkDir(dir, basePath, acc) {
  if (!fs.existsSync(dir)) return
  const entries = fs.readdirSync(dir, { withFileTypes: true })
  for (const e of entries) {
    const full = path.join(dir, e.name)
    const rel = basePath ? `${basePath}/${e.name}` : e.name
    if (e.isDirectory()) {
      walkDir(full, rel, acc)
    } else if (EXTENSIONS.has(path.extname(e.name).toLowerCase())) {
      acc.push('/assets/vehicles/russia/navy/' + rel.replace(/\\/g, '/'))
    }
  }
}

const paths = []
walkDir(NAVY_DIR, '', paths)
paths.sort()

const content = `/**
 * Navy image paths under public/assets/vehicles/russia/navy.
 * Generated by: node scripts/list-navy-images.cjs
 * Do not edit by hand; re-run the script after adding or renaming navy images.
 */
export const NAVY_IMAGE_PATHS: string[] = ${JSON.stringify(paths, null, 2)}
`

fs.writeFileSync(OUT_FILE, content, 'utf8')
console.log('Wrote', paths.length, 'paths to', OUT_FILE)
