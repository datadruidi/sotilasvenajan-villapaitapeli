/**
 * Lists all image files under public/assets/garrisons/military-district-insignia and writes
 * src/data/militaryDistrictInsigniaPaths.ts. Run after adding or renaming insignia images:
 *   node scripts/list-military-district-insignia-images.cjs
 */
const fs = require('fs')
const path = require('path')

const DIR = path.join(__dirname, '..', 'public', 'assets', 'garrisons', 'military-district-insignia')
const OUT_FILE = path.join(__dirname, '..', 'src', 'data', 'militaryDistrictInsigniaPaths.ts')
const EXTENSIONS = new Set(['.jpg', '.jpeg', '.png', '.webp'])

function walkDir(dir, basePath, acc) {
  if (!fs.existsSync(dir)) return
  const entries = fs.readdirSync(dir, { withFileTypes: true })
  for (const e of entries) {
    const full = path.join(dir, e.name)
    const rel = basePath ? `${basePath}/${e.name}` : e.name
    if (e.isDirectory()) {
      walkDir(full, rel, acc)
    } else if (EXTENSIONS.has(path.extname(e.name).toLowerCase())) {
      acc.push('/assets/garrisons/military-district-insignia/' + rel.replace(/\\/g, '/'))
    }
  }
}

const paths = []
walkDir(DIR, '', paths)
paths.sort()

const content = `/**
 * Military district insignia image paths under public/assets/garrisons/military-district-insignia.
 * Generated by: node scripts/list-military-district-insignia-images.cjs
 * Do not edit by hand; re-run the script after adding or renaming images.
 */
export const MILITARY_DISTRICT_INSIGNIA_IMAGE_PATHS: string[] = ${JSON.stringify(paths, null, 2)}
`

fs.writeFileSync(OUT_FILE, content, 'utf8')
console.log('Wrote', paths.length, 'paths to', OUT_FILE)